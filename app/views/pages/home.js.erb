<% if params[:page].to_i == 1 %>
  $(".questions-js").html("");
<% end %>

<%- if @questions.empty? %>
  $(".questions-js").append("<%= render 'shared/no_questions' %>");
<% else %>
  <%- @questions.each do |question| %>
    $(".questions-js").append("<%= escape_javascript(render :partial => 'shared/question', :locals => { :question => question }) %>");
  <% end -%>

  $('.timeago-js').timeago({
    strings: {
      suffixAgo: null,
      suffixFromNow: null,
      seconds: "1 m",
      minute: "1 minute",
      minutes: "%d m",
      hour: "1 h",
      hours: "%d h",
      day: "1 d",
      days: "%d d"
    }
  });
<% end -%>

$(".load_more-js").attr('href', "/?page=<%= params[:page].to_i + 1 %>&scoped_questions=<%= params[:scoped_questions] %>&question_pages=<%= @question_pages %>");

<% if params[:page].to_i + 1 > @question_pages %>
  $(".load_more-js").fadeOut();
<% else %>
  $(".load_more-js").fadeIn();
<% end %>